(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{836:function(t,s,a){t.exports=a.p+"assets/img/kusto_troubleshooting.c9bfd8c4.png"},837:function(t,s,a){t.exports=a.p+"assets/img/Icm_Query.3f35f812.png"},838:function(t,s,a){t.exports=a.p+"assets/img/Attract.fc5ef337.png"},890:function(t,s,a){"use strict";a.r(s);var e=a(74),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"troubleshoot-using-kusto"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#troubleshoot-using-kusto"}},[t._v("#")]),t._v(" Troubleshoot using Kusto")]),t._v(" "),e("p",[t._v("Kusto Extra MetaData is stored in property bag\nCustomDimentions, ClientEvents, CustomEvent and TraceEvent")]),t._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[t._v("ClientEvents\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Timestamp")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" todatetime"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2019-04-01 20:31:02Z"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Timestamp")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" todatetime"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2019-04-01 20:51:02Z"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" Name "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GenericErrorDialog"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" extend cd "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" parsejson"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CustomDimentions"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" cd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("errorCode "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("contains")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GenericGetCompanyInfo"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("or")]),t._v(" cd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("errorMessage "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("contains")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Undefined"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" cd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rootActivity "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br")])]),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[t._v("TraceEvent\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" ActivityType "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("contains")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"HcmAttEOL"')]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[t._v("ClientEvents\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" RootActivityId "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v(" \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// If there is no output then we can get it from TraceEvent")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[t._v("TraceEvent\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" RootActivityId "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[t._v("TraceEvent\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" SessionId "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" project "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TIMESTAMP")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" RootActivityId"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ActivityType"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ActivityVector"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" TraceLevel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" TraceMessage\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[t._v("TraceEvent\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" RootActivityId "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" project "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TIMESTAMP")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Application"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ActivityType"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ActivityVector"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" TraceLevel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" TraceMessage\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("p",[t._v("With Local timestamp and sorting ðŸ‘")]),t._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[t._v("TraceEvent\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v("  TraceLevel "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Error"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v("  ActivityType "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"HcmASHandleChangeMessage"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" extend LocalTime "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TIMESTAMP")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("h "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// UTC -> PST")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" project format_datetime"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LocalTime"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'yy-MM-dd [hh:mm:ss tt]'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" format_datetime"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TIMESTAMP")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'yy-MM-dd [hh:mm:ss tt]'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("Tenant"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("ActivityType"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("ActivityVector"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("TraceLevel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" TraceMessage\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" sort "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TIMESTAMP")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br")])]),e("p",[t._v("ActivityVector provide the sequence of execution for Async calls so it's helpful on building the call stack during investigation")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("ðŸ’¡ Notes")]),t._v(" "),e("ul",[e("li",[t._v("Leverage TraceEvent not just ClientEvents using raid/session id etc")]),t._v(" "),e("li",[t._v("Leverage activity vector, activity type, application, service")]),t._v(" "),e("li",[t._v("Use custom dimensions when needed")]),t._v(" "),e("li",[t._v("Use status app for environment details, tenant details, user information")]),t._v(" "),e("li",[t._v("Use tsg/wiki - all possible exception are there so search for it")]),t._v(" "),e("li",[t._v("xrm exceptions - there is an amazing wiki - use that (xrm is on top of CDS)")]),t._v(" "),e("li",[t._v("Play with product to understand how something should work")]),t._v(" "),e("li",[t._v("Big picture - don't focus on just one issue what is reported - offer example")]),t._v(" "),e("li",[t._v("repro - last thing to do")])])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Apps ðŸ’¡")]),t._v(" "),e("ul",[e("li",[t._v("Go1Adapter.sln")]),t._v(" "),e("li",[t._v("XRMSolutions.sln")]),t._v(" "),e("li",[t._v("TalentEngagementServiceApp.sln (Attract Service)")]),t._v(" "),e("li",[t._v("SchedulingServiceApp.sln (Schedular for scheduling interviews and stuff)")]),t._v(" "),e("li",[t._v("OfferManagementService.sln")]),t._v(" "),e("li",[t._v("JobPostingServiceApp.sln")]),t._v(" "),e("li",[t._v("OnboardingServiceApp.sln")]),t._v(" "),e("li",[t._v("ProvisioningServiceApp.sln")]),t._v(" "),e("li",[t._v("FlightingServiceApp.sln\nAll services are in D365")])])]),t._v(" "),e("h2",{attrs:{id:"onboarding"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#onboarding"}},[t._v("#")]),t._v(" Onboarding")]),t._v(" "),e("ul",[e("li",[t._v("https://dynamics.wiki/index.php/HCM_Engineering")]),t._v(" "),e("li",[t._v("https://dynamics.wiki/index.php/Security_Groups_and_memberships#XRM_environments")]),t._v(" "),e("li",[t._v("https://msazure.visualstudio.com/D365")])]),t._v(" "),e("h2",{attrs:{id:"resources-links"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#resources-links"}},[t._v("#")]),t._v(" Resources/links")]),t._v(" "),e("ul",[e("li",[t._v("https://attract.talent.dev.dynamics.com")]),t._v(" "),e("li",[t._v("https://dataexplorer.azure.com/*")]),t._v(" "),e("li",[t._v("https://kusto.azurewebsites.net/docs/")])]),t._v(" "),e("h2",{attrs:{id:"apps"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#apps"}},[t._v("#")]),t._v(" Apps")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://onboard.talent.dev.dynamics.com/dashboard",target:"_blank",rel:"noopener noreferrer"}},[t._v("Onboard"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://offer.talent.dev.dynamics.com/offers",target:"_blank",rel:"noopener noreferrer"}},[t._v("Offer"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://attract.talent.dev.dynamics.com/environments",target:"_blank",rel:"noopener noreferrer"}},[t._v("Attract"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"tools"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tools"}},[t._v("#")]),t._v(" Tools")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://msazure.visualstudio.com/d365",target:"_blank",rel:"noopener noreferrer"}},[t._v("Repo"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://dataexplorer.azure.com/clusters/dynamicshcmint/databases/HCMServicesLogsINT",target:"_blank",rel:"noopener noreferrer"}},[t._v("Data Explorer web"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"kusto-environments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kusto-environments"}},[t._v("#")]),t._v(" Kusto Environments")]),t._v(" "),e("p",[t._v("Connection: https://dynamicshcmint.kusto.windows.net\nConnection: https://dynamicshcmint.kusto.windows.net")]),t._v(" "),e("h2",{attrs:{id:"documents"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#documents"}},[t._v("#")]),t._v(" Documents")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://microsoft.sharepoint.com/teams/Dynamics365HCM/Shared%20Documents/Forms/AllItems.aspx",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dynamics365HCM"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://microsoft.sharepoint.com/:u:/r/teams/Dynamics365HCM/_layouts/15/Doc.aspx?sourcedoc=%7B20405A97-6756-437A-9544-F81E096386C5%7D&file=HCM_Arch.vsdx&action=default",target:"_blank",rel:"noopener noreferrer"}},[t._v("HCM Arch"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"todo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#todo"}},[t._v("#")]),t._v(" TODO")]),t._v(" "),e("ul",[e("li",[t._v("Service Fabric and service app")])]),t._v(" "),e("h2",{attrs:{id:"kusto-environment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kusto-environment"}},[t._v("#")]),t._v(" Kusto Environment")]),t._v(" "),e("p",[e("img",{attrs:{src:a(836),alt:"Demo"}})]),t._v(" "),e("h2",{attrs:{id:"icm-query"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#icm-query"}},[t._v("#")]),t._v(" ICM Query")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://aka.ms/ICM",target:"_blank",rel:"noopener noreferrer"}},[t._v("ICM link"),e("OutboundLink")],1),t._v(" "),e("img",{attrs:{src:a(837),alt:"ICM QUery"}})]),t._v(" "),e("h2",{attrs:{id:"attract"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#attract"}},[t._v("#")]),t._v(" Attract")]),t._v(" "),e("p",[e("img",{attrs:{src:a(838),alt:"Attract"}})])])}),[],!1,null,null,null);s.default=r.exports}}]);